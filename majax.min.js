/* * * * * * * * * *
 *      majaX      *
 *  Version 0.2.6  *
 *  License:  MIT  *
 * Simon  Waldherr *
 * * * * * * * * * */

var majaX,majax;majaX=function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s={},t=0;if(void 0===a.url)return!1;for(r=/((http[s]?:\/\/)?([\.:\/?&]+)?([^\.:\/?&]+)?)/gm,s.regex=a.url.match(r),s.clean={protocol:"",domain:"",port:"",path:"",fileextension:"",query:""},t=0;t<s.regex.length;t+=1)1===majax.countChars(s.regex[t],"://")?(s.clean.protocol=void 0===s.regex[t]?!1:s.regex[t].split("://")[0],s.clean.domain=void 0===s.regex[t]?!1:s.regex[t].split("://")[1]):0===majax.countChars(s.regex[t],"/")&&0===majax.countChars(s.regex[t],":")&&""===s.clean.path?s.clean.domain+=void 0===s.regex[t]?!1:s.regex[t]:1===majax.countChars(s.regex[t],":")&&""===s.clean.path?s.clean.port=void 0===s.regex[t]?!1:s.regex[t].split(":")[1]:0===majax.countChars(s.regex[t],"?")&&0===majax.countChars(s.regex[t],"&")&&""===s.clean.query?s.clean.path+=void 0===s.regex[t]?!1:s.regex[t]:s.clean.query+=void 0===s.regex[t]?!1:s.regex[t];if(-1!==s.clean.path.indexOf(".")&&(s.clean.fileextension=s.clean.path.split(".")[s.clean.path.split(".").length-1]),m={txt:"text/plain",json:"application/json",atom:"application/atom+xml",rss:"application/rss+xml",soap:"application/soap+xml",xml:"application/xml",svg:"image/svg+xml",css:"text/css",csv:"text/csv",html:"text/html",vcf:"text/vcard",gif:"image/gif",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",tiff:"image/tiff",mp3:"audio/mpeg",mp4:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",m4a:"audio/mp4",ogg:"audio/ogg",oga:"audio/ogg",webma:"audio/webm",wav:"audio/wav"},d=void 0===a.url?!1:a.url,e=void 0===a.method?"GET":a.method.toUpperCase(),f=void 0===a.port?void 0===s.clean.port?"80":s.clean.port:a.port,h=void 0===a.type?void 0===s.clean.fileextension?1:2:3,h=void 0===a.mimetype?h:4,g=void 0===a.type?void 0===s.clean.fileextension?"txt":s.clean.fileextension.toLowerCase():a.type.toLowerCase(),n=void 0===a.mimetype?void 0===m[s.clean.fileextension]?void 0===m[g]?"text/plain":m[g]:m[s.clean.fileextension]:a.mimetype,o=void 0===a.data?!1:a.data,j=void 0===a.faildata?!1:a.faildata,i=void 0===a.header?{}:a.header,b=void 0!==a.success?a.success:b,c=void 0!==a.error?a.error:c,void 0===i["Content-type"]&&(i["Content-type"]="application/x-www-form-urlencoded"),"DEBUG"===e)return{url:d,urlparts:s.clean,port:f,type:g,mime:n,data:a};if(k=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):XMLHttpRequest&&new XMLHttpRequest||null,l=window.setTimeout(function(){k.abort()},6e3),k.onreadystatechange=function(){var a,d;4===k.readyState&&(d=k.status.toString().charAt(0),clearTimeout(l),k.headersObject=majax.getRespHeaders(k.getAllResponseHeaders()),"2"!==d&&"3"!==d?c(j,k):"API"===e?"github.com"===s.clean.domain&&(a=JSON.parse(k.responseText),void 0!==a.content?(a.content=majax.base64_decode(a.content.replace(/\n/gim,"")),b(a,k)):b(JSON.parse(k.responseText),k)):"HEAD"===e?b(k.responseText,k):(3>h&&(n=k.headersObject["Content-Type"]),-1!==n.indexOf("json")?b(JSON.parse(k.responseText),k):-1!==n.indexOf("xml")?b(majax.getXMLasObject(k.responseText),k):-1!==n.indexOf("csv")?b(majax.getCSVasArray(k.responseText),k):-1!==n.indexOf("image")||-1!==n.indexOf("video")||-1!==n.indexOf("audio")||-1!==n.indexOf("user-defined")?b(k.response,k):b(k.responseText,k)))},t=0,q="",o!==!1)for(p in o)"string"==typeof o[p]&&(0!==t&&(q+="&"),q+=p+"="+o[p],t+=1);"API"===e?"github.com"===s.clean.domain&&(n="json",void 0===s.clean.path.split("/")[2]?(k.open("GET","https://api.github.com/users/"+s.clean.path.split("/")[1]+"/repos",!0),majax.setReqHeaders(k,i),k.send()):void 0===s.clean.path.split("/")[3]?(k.open("GET","https://api.github.com/repos/"+s.clean.path.split("/")[1]+"/"+s.clean.path.split("/")[2]+"/contents/",!0),majax.setReqHeaders(k,i),k.send()):(k.open("GET","https://api.github.com/repos/"+s.clean.path.split("/")[1]+"/"+s.clean.path.split("/")[2]+"/contents/"+s.clean.path.split("/",4)[3],!0),majax.setReqHeaders(k,i),k.send())):("POST"!==e&&""!==q&&(d=""!==s.clean.query?d+"&"+q:d+"?"+q),"GET"===e?(k.open("GET",d,!0),majax.overrideMime(k,n),majax.setReqHeaders(k,i),k.send()):"POST"===e?(k.open("POST",d,!0),majax.overrideMime(k,n),majax.setReqHeaders(k,i),k.send(q)):("HEAD"===e&&(n="none"),k.open(e,d,!0),majax.overrideMime(k,n),majax.setReqHeaders(k,i),k.send()))},majax={setReqHeaders:function(a,b){"use strict";var c;if(b!==!1&&"object"==typeof b)for(c in b)"string"==typeof b[c]&&a.setRequestHeader(c,b[c])},getRespHeaders:function(a){"use strict";var b,c,d,e={};if("string"==typeof a)for(c=a.split(/\n/),b=0;b<c.length;b+=1)"string"==typeof c[b]&&(d=c[b].split(": "),d[0].length>3&&d[1].length>3&&(e[d[0].trim()]=d[1].trim()));return e},overrideMime:function(a,b){"use strict";"application/xml"===b?(a.overrideMimeType(b),a.responseType=""):(-1!==b.indexOf("image")||-1!==b.indexOf("video")||-1!==b.indexOf("audio"))&&(a.overrideMimeType("text/plain; charset=x-user-defined"),a.responseType="arraybuffer")},countChars:function(a,b){"use strict";return a=a.split(b),"object"==typeof a?a.length-1:0},getText:function(a){"use strict";var b=/<([^<>]*)>([^\/]*)<(\/[^<>]*)>/gim;return"string"==typeof a?a.replace(b,""):void 0},getXMLasObject:function(a){"use strict";var b,c={};return"object"==typeof a?majax.returnChilds(c,a,1):(b=document.createElement("div"),b.innerHTML=a,majax.returnChilds(c,b,1))},returnChilds:function(a,b,c){"use strict";var d,e,f,g,h,i=[],j=b.childNodes.length;for(e=0,d=0;j>d;d+=1)if(null!==b.childNodes[d].localName){a[e]={};for(g in b.childNodes[d])void 0!==b.childNodes[d][g]&&("string"==typeof b.childNodes[d][g]||"number"==typeof b.childNodes[d][g])&&(f=b.childNodes[d][g],"accessKey"!==g&&"baseURI"!==g&&"className"!==g&&"contentEditable"!==g&&"dir"!==g&&"namespaceURI"!==g&&""!==f&&g!==g.toUpperCase()&&0!==f&&"childs"!==g&&"textContent"!==g&&"nodeType"!==g&&"tabIndex"!==g&&"innerHTML"!==g&&"outerHTML"!==g?a[e][g]=f:("innerHTML"===g||"outerHTML"===g)&&(a[e][g]=majax.escapeHtmlEntities(f)));void 0!==b.childNodes[d].innerHTML&&(h=majax.getText(b.childNodes[d].innerHTML).trim(),""!==h&&(a[e].textContent=h),b.childNodes[d].childNodes.length>1&&(a[e].childs=majax.returnChilds(i,b.childNodes[d],c+1)),e+=1)}return a},isEmpty:function(a){"use strict";var b={},c=[];return a===b||a===c||null===a||void 0===a?!0:!1},cleanArray:function(a){"use strict";var b,c=[],d=0;for(d=0;d<a.length;d+=1)"string"==typeof a[d]||"number"==typeof a[d]?c.push(a[d]):"object"==typeof a[d]&&(b=majax.cleanArray(a[d]),""!==b[0]&&c.push(majax.cleanArray(a[d])));return c},cleanObject:function(a){"use strict";var b,c={};for(b in a)void 0!==a[b]&&("object"==typeof a[b]||"function"==typeof a[b]||""==typeof a[b]||majax.isEmpty(a[b])?"object"==typeof a[b]&&(majax.isEmpty(majax.cleanObject(a[b]))||null===a[b]||(c[b]=majax.cleanObject(a[b]))):c[b]=a[b]);return c},getCSVasArray:function(a){"use strict";var b,c,d,e,f,g=";";for(b=new RegExp("(\\"+g+"|\\r?\\n|\\r|^)"+'(?:"([^"]*(?:""[^"]*)*)"|'+'([^"\\'+g+"\\r\\n]*))","gi"),c=[[]],d=b.exec(a);d;)e=d[1],e.length&&e!==g&&c.push([]),f=d[2]?d[2].replace(new RegExp('""',"g"),'"'):d[3],c[c.length-1].push(f),d=b.exec(a);return majax.cleanArray(c)},base64_encode:function(a){"use strict";if("function"!=typeof window.btoa){for(var b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",k=0;k<a.length;)k+=1,f=a.charCodeAt(k),k+=1,g=a.charCodeAt(k),k+=1,h=a.charCodeAt(k),b=f>>2,c=(3&f)<<4|g>>4,d=(15&g)<<2|h>>6,e=63&h,isNaN(g)?d=e=64:isNaN(h)&&(e=64),j+=i.charAt(b)+i.charAt(c)+i.charAt(d)+i.charAt(e);return j}return window.btoa(a)},base64_decode:function(a){"use strict";if("function"!=typeof window.btoa){var b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)k+=1,b=i.indexOf(a.charAt(k)),k+=1,c=i.indexOf(a.charAt(k)),k+=1,d=i.indexOf(a.charAt(k)),k+=1,e=i.indexOf(a.charAt(k)),f=b<<2|c>>4,g=(15&c)<<4|d>>2,h=(3&d)<<6|e,j+=String.fromCharCode(f)+(64!==d?String.fromCharCode(g):"")+(64!==e?String.fromCharCode(h):"");return j}return window.atob(a)},escapeHtmlEntities:function(a){"use strict";return a.replace(/[\u00A0-\u2666<>\&]/g,function(a){var b={34:"quot",38:"amp",39:"apos",60:"lt",62:"gt",160:"nbsp",161:"iexcl",162:"cent",163:"pound",164:"curren",165:"yen",166:"brvbar",167:"sect",168:"uml",169:"copy",170:"ordf",171:"laquo",172:"not",173:"shy",174:"reg",175:"macr",176:"deg",177:"plusmn",178:"sup2",179:"sup3",180:"acute",181:"micro",182:"para",183:"middot",184:"cedil",185:"sup1",186:"ordm",187:"raquo",188:"frac14",189:"frac12",190:"frac34",191:"iquest",192:"Agrave",193:"Aacute",194:"Acirc",195:"Atilde",196:"Auml",197:"Aring",198:"AElig",199:"Ccedil",200:"Egrave",201:"Eacute",202:"Ecirc",203:"Euml",204:"Igrave",205:"Iacute",206:"Icirc",207:"Iuml",208:"ETH",209:"Ntilde",210:"Ograve",211:"Oacute",212:"Ocirc",213:"Otilde",214:"Ouml",215:"times",216:"Oslash",217:"Ugrave",218:"Uacute",219:"Ucirc",220:"Uuml",221:"Yacute",222:"THORN",223:"szlig",224:"agrave",225:"aacute",226:"acirc",227:"atilde",228:"auml",229:"aring",230:"aelig",231:"ccedil",232:"egrave",233:"eacute",234:"ecirc",235:"euml",236:"igrave",237:"iacute",238:"icirc",239:"iuml",240:"eth",241:"ntilde",242:"ograve",243:"oacute",244:"ocirc",245:"otilde",246:"ouml",247:"divide",248:"oslash",249:"ugrave",250:"uacute",251:"ucirc",252:"uuml",253:"yacute",254:"thorn",255:"yuml",402:"fnof",913:"Alpha",914:"Beta",915:"Gamma",916:"Delta",917:"Epsilon",918:"Zeta",919:"Eta",920:"Theta",921:"Iota",922:"Kappa",923:"Lambda",924:"Mu",925:"Nu",926:"Xi",927:"Omicron",928:"Pi",929:"Rho",931:"Sigma",932:"Tau",933:"Upsilon",934:"Phi",935:"Chi",936:"Psi",937:"Omega",945:"alpha",946:"beta",947:"gamma",948:"delta",949:"epsilon",950:"zeta",951:"eta",952:"theta",953:"iota",954:"kappa",955:"lambda",956:"mu",957:"nu",958:"xi",959:"omicron",960:"pi",961:"rho",962:"sigmaf",963:"sigma",964:"tau",965:"upsilon",966:"phi",967:"chi",968:"psi",969:"omega",977:"thetasym",978:"upsih",982:"piv",8226:"bull",8230:"hellip",8242:"prime",8243:"Prime",8254:"oline",8260:"frasl",8472:"weierp",8465:"image",8476:"real",8482:"trade",8501:"alefsym",8592:"larr",8593:"uarr",8594:"rarr",8595:"darr",8596:"harr",8629:"crarr",8656:"lArr",8657:"uArr",8658:"rArr",8659:"dArr",8660:"hArr",8704:"forall",8706:"part",8707:"exist",8709:"empty",8711:"nabla",8712:"isin",8713:"notin",8715:"ni",8719:"prod",8721:"sum",8722:"minus",8727:"lowast",8730:"radic",8733:"prop",8734:"infin",8736:"ang",8743:"and",8744:"or",8745:"cap",8746:"cup",8747:"int",8756:"there4",8764:"sim",8773:"cong",8776:"asymp",8800:"ne",8801:"equiv",8804:"le",8805:"ge",8834:"sub",8835:"sup",8836:"nsub",8838:"sube",8839:"supe",8853:"oplus",8855:"otimes",8869:"perp",8901:"sdot",8968:"lceil",8969:"rceil",8970:"lfloor",8971:"rfloor",9001:"lang",9002:"rang",9674:"loz",9824:"spades",9827:"clubs",9829:"hearts",9830:"diams",338:"OElig",339:"oelig",352:"Scaron",353:"scaron",376:"Yuml",710:"circ",732:"tilde",8194:"ensp",8195:"emsp",8201:"thinsp",8204:"zwnj",8205:"zwj",8206:"lrm",8207:"rlm",8211:"ndash",8212:"mdash",8216:"lsquo",8217:"rsquo",8218:"sbquo",8220:"ldquo",8221:"rdquo",8222:"bdquo",8224:"dagger",8225:"Dagger",8240:"permil",8249:"lsaquo",8250:"rsaquo",8364:"euro"};return"&"+(b[a.charCodeAt(0)]||"#"+a.charCodeAt(0))+";"})}};